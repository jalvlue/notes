[[背包问题九讲]]

# 背包问题
![[Pasted image 20240410152203.png]]

# 0-1 背包
一般形式:
有 n 件物品和一个最多能背重量为 w 的背包。第 i 件物品的重量是 weight[i]，得到的价值是 value[i] 。**每件物品只能用一次**，求解将哪些物品装入背包里物品价值总和最大。

这里的重点是有限的背包大小, 每件物品限量只能取一次


## 二维 dp 数组
### dp 数组
使用二维数组, `dp[i][j]` 表示从下标为 `[0, i]` 的物品中任取, 放进容量为 `j` 的背包中, 最大的价值

### 递推公式
`dp[i][j]`, 背包容量为 `j` 时, 对第 `i` 个物品的选择
- 不取物品 `i`: 此时背包总价值不变, 为 `dp[i-1][j]`
- 取物品 `i`: 此时需要在背包中腾出位置 `weight[i]` 来放置物品 `i`, 此时背包总价值为 `dp[i-1][j-weight[i]] + value[i]`

综上递推公式为:
`dp[i][j] = max(dp[i-1][j], dp[i-1][j-weight[i]] + value[i])`

### 初始化
容量为 `0` 时, 背包不能装东西, 总价值为 0
只考虑第一个物品时, 如果容量够大, 那么总价值就是第一个物品的价值, 如果不够大则什么东西都装不聊
![[Pasted image 20240410153550.png]]


## 一维滚动 dp 数组
上面的二维 dp 数组中, 实际上只是用到了当前层的上一层, 
因此可以将上一层拷贝到当前层, 然后只使用当前层来求


需要注意的是, 在滚动数组中, 
必须先遍历物品, 再遍历背包
遍历背包需要从大到小遍历